<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="amcServerList" type="PackageViewControl.Controllers.ServerConnectSection, CommonDialogs" />
    <section name="profileServerList" type="EMConsole.Controllers.ServerConnectSection, EMConsole" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <appSettings>
    <add key="Languages" value="" />
    <add key="SkipCertificateValidation" value="False" />
    <add key="InitialAuthentication" value="Windows" />
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>
  <runtime>
    <generatePublisherEvidence enabled="false" />
    <enforceFIPSPolicy enabled="false" />
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.ValueTuple" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />
      </dependentAssembly>
    </assemblyBinding>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-13.0.0.0" newVersion="13.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <amcServerList>
    <servers>
      <add name="Central Server" url="http://localhost/Central" />
    </servers>
  </amcServerList>
  <profileServerList>
    <servers />
  </profileServerList>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <!-- Windows auth, http -->
        <binding name="ProfileManagement_BasicHttpBinding" closeTimeout="00:00:30" openTimeout="00:00:30" sendTimeout="00:10:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="67108864" maxBufferPoolSize="524288" maxReceivedMessageSize="67108864" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="67108864" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
          </security>
        </binding>
        <!-- Windows auth, https -->
        <binding name="ProfileManagement_BasicHttpsBinding" closeTimeout="00:00:30" openTimeout="00:00:30" sendTimeout="00:10:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="67108864" maxBufferPoolSize="524288" maxReceivedMessageSize="67108864" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="67108864" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
      <wsHttpBinding>
        <!-- Anonymous auth, http -->
        <binding name="ProfileManagement_CustomBinding" closeTimeout="00:00:30" openTimeout="00:00:30" sendTimeout="00:10:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" transactionFlow="false" maxBufferPoolSize="524288" maxReceivedMessageSize="67108864">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="67108864" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true" />
          </security>
        </binding>
        <!-- Anonymous auth, https -->
        <binding name="ProfileManagement_CustomBindingHttps" closeTimeout="00:00:30" openTimeout="00:00:30" sendTimeout="00:10:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" transactionFlow="false" maxBufferPoolSize="524288" maxReceivedMessageSize="67108864">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="67108864" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true" />
          </security>
        </binding>
      </wsHttpBinding>
      <customBinding>
        <!-- WSFederation binding -->
        <binding name="WS2007FederationHttpBinding" closeTimeout="00:00:30" openTimeout="00:00:30" sendTimeout="00:10:00">
          <security defaultAlgorithmSuite="Default" authenticationMode="SecureConversation" requireDerivedKeys="false" includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10" canRenewSecurityContextToken="true">
            <secureConversationBootstrap defaultAlgorithmSuite="Default" authenticationMode="IssuedTokenOverTransport" requireDerivedKeys="false" includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10">
              <issuedTokenParameters keySize="256">
                <additionalRequestParameters>
                  <trust:SecondaryParameters xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
                    <trust:KeyType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/ws-sx/ws-trust/200512/SymmetricKey</trust:KeyType>
                    <trust:KeySize xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">256</trust:KeySize>
                    <trust:KeyWrapAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p</trust:KeyWrapAlgorithm>
                    <trust:EncryptWith xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#aes256-cbc</trust:EncryptWith>
                    <trust:SignWith xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2000/09/xmldsig#hmac-sha1</trust:SignWith>
                    <trust:CanonicalizationAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/10/xml-exc-c14n#</trust:CanonicalizationAlgorithm>
                    <trust:EncryptionAlgorithm xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://www.w3.org/2001/04/xmlenc#aes256-cbc</trust:EncryptionAlgorithm>
                  </trust:SecondaryParameters>
                </additionalRequestParameters>
                <!-- Sts -->
                <issuer address="https://sts.com/adfs/services/trust/13/kerberosmixed" binding="customBinding" bindingConfiguration="sts/kerberosmixed" />
                <issuerMetadata address="https://sts.com/adfs/services/trust/mex" />
              </issuedTokenParameters>
              <localClientSettings detectReplays="false" />
              <localServiceSettings detectReplays="false" />
            </secureConversationBootstrap>
            <localClientSettings detectReplays="false" />
            <localServiceSettings detectReplays="false" />
          </security>
          <textMessageEncoding>
            <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="67108864" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          </textMessageEncoding>
          <httpsTransport bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="67108864" maxBufferPoolSize="524288" maxReceivedMessageSize="67108864" transferMode="Buffered" useDefaultWebProxy="true" />
        </binding>
        <!-- Binding to talk to sts (Kerberos) -->
        <binding name="sts/kerberosmixed">
          <security defaultAlgorithmSuite="Basic128" authenticationMode="KerberosOverTransport" requireDerivedKeys="false" includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10">
            <localClientSettings detectReplays="false" />
            <localServiceSettings detectReplays="false" />
          </security>
          <textMessageEncoding />
          <httpsTransport />
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint name="ProfileManagement_Windows" behaviorConfiguration="ProfileManagement" binding="basicHttpBinding" bindingConfiguration="ProfileManagement_BasicHttpBinding" contract="ProfileManagementServer.IProfileManagement" />
      <endpoint name="ProfileManagement_WindowsHttps" behaviorConfiguration="ProfileManagement" binding="basicHttpBinding" bindingConfiguration="ProfileManagement_BasicHttpsBinding" contract="ProfileManagementServer.IProfileManagement" />
      <endpoint name="ProfileManagement_Anonymous" behaviorConfiguration="ProfileManagement" binding="wsHttpBinding" bindingConfiguration="ProfileManagement_CustomBinding" contract="ProfileManagementServer.IProfileManagement" />
      <endpoint name="ProfileManagement_AnonymousHttps" behaviorConfiguration="ProfileManagement" binding="wsHttpBinding" bindingConfiguration="ProfileManagement_CustomBindingHttps" contract="ProfileManagementServer.IProfileManagement" />
      <endpoint name="PSFederation" behaviorConfiguration="ProfileManagement" binding="customBinding" bindingConfiguration="WS2007FederationHttpBinding" contract="ProfileManagementServer.IProfileManagement" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ProfileManagement">
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <system.net>
    <defaultProxy>
      <!-- Allows Fiddler to work - change for security if required -->
      <proxy usesystemdefault="True" bypassonlocal="False" />
    </defaultProxy>
  </system.net>
  <log4net>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file type="log4net.Util.PatternString" value="%property{LogName}\\EMConsole.log" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="5" />
      <maximumFileSize value="1MB" />
      <threshold value="All" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level [%thread] %utcdate{ISO8601} [%logger{2}] %message%newline" />
      </layout>
    </appender>
    <appender name="RollingUpgradeLogFileAppender" type="log4net.Appender.FileAppender">
      <file type="log4net.Util.PatternString" value="%property{LogName}\\EMConfigUpgrade.log" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <appendToFile value="false" />
      <threshold value="All" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level [%thread] %utcdate{ISO8601} [%logger{2}] %message%newline" />
      </layout>
    </appender>
    <appender name="GpoReportLogFileAppender" type="log4net.Appender.FileAppender">
      <file type="log4net.Util.PatternString" value="%property{LogName}\\GpoReport.log" />
      <encoding value="utf-8" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <appendToFile value="false" />
      <threshold value="All" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message%newline" />
      </layout>
    </appender>
    <!-- Console logs go into appsense profile directory (e.g. appdata\roaming\appsense\environment manager console
        or appdata\roaming\appsense\environment manager console) -->
    <root>
      <!-- Modify level to enable normal log file.  Valid values are Off, Fatal, Error, Warn, Info, Debug, or All.-->
      <level value="Off" />
      <appender-ref ref="RollingLogFileAppender" />"
        </root>
    <logger name="UpgradeLogger">
      <!-- Modify level to enable logging for configuration upgrade.  Valid values are Off, Fatal, Error, Warn, Info, Debug, or All.-->
      <level value="Info" />
      <appender-ref ref="RollingUpgradeLogFileAppender" />"
        </logger>
    <logger name="GpoImportLogger">
      <!-- Modify level to enable logging for configuration upgrade.  Valid values are Off, Fatal, Error, Warn, Info, Debug, or All.-->
      <level value="Info" />
      <appender-ref ref="GpoReportLogFileAppender" />"
        </logger>
  </log4net>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6.1" />
  </startup>
</configuration>